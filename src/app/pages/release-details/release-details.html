<div>
  <app-breadcrumb [items]="items" />

  <div class="p-5" *ngIf="release != null">
    <div class="max-w-6xl">
      <form class="grid grid-cols-1 md:grid-cols-3 gap-6">

        <!-- Left: Code + Description textarea -->

        <label for="details"
               class="block text-2xl font-bold text-gray-700 md:col-span-2 md:row-start-1">
          {{ release.code }}
        </label>
        <!-- filler for col-3, row-1 -->
        <div class="hidden md:block"></div>

        <textarea
          id="details"
          name="details"
          rows="10"
          class="w-full border border-gray-300 rounded-xl p-4
             focus:outline-none focus:ring-2 focus:ring-blue-400 resize-none
             md:col-span-2 md:row-start-2"
          placeholder="Enter description..."
          pTextarea
          [value]="release.description"
          readonly
        ></textarea>

        <!-- Right: Status  -->
        <div class="space-y-6 md:col-start-3 md:row-start-2">
          <div>
            <label for="status" class="block text-base font-bold text-gray-700 mb-1">
              Status:
            </label>
            <input
              id="status"
              name="status"
              type="text"
              class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"
              [value]="release.status"
              readonly
            />
          </div>
        </div>
      </form>
    </div>
  </div>

  <div id="features-table">
    <p-card header="Features">
      <p-table #dt1 [value]="features" dataKey="code">
        <ng-template #header>
          <tr>
            <th style="min-width:10rem">
              <div class="flex items-center">
                Code
              </div>
            </th>
            <th style="min-width:15rem">
              <div class="flex items-center">
                Title
              </div>
            </th>
            <th style="min-width:10rem">
              <div class="flex items-center">
                Status
              </div>
            </th>
            <th style="min-width:10rem">
              <div class="flex items-center">
                Assigned To
              </div>
            </th>
            <th style="width:12%">Actions</th>
          </tr>
        </ng-template>
        <ng-template #body let-feature>
          <tr>
            <td>
              {{ feature.code }}
            </td>
            <td>{{ feature.title }}</td>
            <td>{{ feature.status }}</td>
            <td>{{ getFullNameByUsername(feature.assignedTo) }}</td>
            <td>
              <div class="flex flex-wrap gap-2">
                <a routerLink="/products/{{productCode}}/features/{{feature.code}}"
                ><p-button size="small" icon="pi pi-search"/></a>
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </p-card>
  </div>
</div>
